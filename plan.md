# sing-box-deve plan文档
“sb” 启动脚本，启动以后首次部署也需要USER进入面板以后手动输入1进行安装
## 1) 安装/重装
首次部署或按新参数重建配置

具体流程依次是：


## 2) 状态与节点查看
查看运行状态、节点信息与运行摘要

### 1) 查看完整状态面板（panel --full）
### 2) 查看全量运行信息（list --all）
### 3) 仅查看节点链接（list --nodes）
### 0) 返回上级

## 3) 协议管理
协议增删与协议能力矩阵

### 1) 查看协议能力矩阵（protocol matrix）
显示当前脚本支持的所有协议能力矩阵

### 2) 查看已启用协议及端口能力矩阵（protocol matrix --enabled）
最左边是从1到n的序列数用于标号，显示当前脚本已经启用了的所有协议（必须注明对应端口）能力矩阵，由于支持多个不同端口的相同协议，因此每个协议必须要注明对应的入站inbound和出站outbound端口号，如果是jump多端口，也需要注明

### 3) 新增协议（cfg protocol-add）
打印出当前脚本支持的所有协议（不是协议能力矩阵）
等待USER输入其中一个，需要进行检查USER输入的协议是否支持（不需要检查该协议是不是已经创建过了）
若支持，则继续选择接下来的是否要jump多端口，端口号（手动或随机），是否需要WARP出站（若需要则需要安装），订阅

### 4) 移除协议（cfg protocol-remove）
调用2.2，打印出已启用协议及端口能力矩阵
等待USER输入需要删除的对应协议的序列数（可以空格分开输入多个数字）
移除对应协议

### 5) 端口修改
调用2.2，打印出已启用协议及端口能力矩阵
等待USER输入需要修改端口的对应协议的序列数
修改该序列数对应的协议监听端口（USER选择是否jump，再选择端口号手动或随机），并自动移除修改之前端口的防火墙放行规则，放行新端口的防火墙

### 0) 返回上级

## 4) 出站策略管理
设置直连/上游代理/分流路由/按端口策略/分享出口

### 1) 切换为直连出站（set-egress direct）
调用2.2，打印出已启用协议及端口能力矩阵
等待USER输入需要修改端口的对应协议的序列数
将其改为直连出站

### 2) 配置上游代理出站（set-egress socks/http/https）
调用2.2，打印出已启用协议及端口能力矩阵
等待USER输入需要修改端口的对应协议的序列数
配置其socks/http/https代理出站

### 3) 设置分流路由模式（set-route ...）


### 4) 设置分享出口端点（set-share ...）


### 5) 设置按端口出站策略（set-port-egress）


### 0) 返回上级


## 6) 服务管理
重启核心与 Argo、刷新节点、看日志

## 7) 更新管理
更新脚本或内核，支持主源/备源

### 1) 更新核心内核（update --core）
### 2) 更新脚本与模块（update --script）
### 3) 同时更新内核与脚本（update --all）
### 4) 仅主源更新脚本（update --script --source primary）
### 5) 仅备源更新脚本（update --script --source backup）
### 0) 返回上级

## 8) 防火墙管理
查看托管规则、回滚、重放持久化规则
### 1) 查看防火墙托管状态（fw status）
### 2) 回滚到上次防火墙快照（fw rollback）
### 3) 重放托管防火墙规则（fw replay）
### 0) 返回上级


## 9) 设置管理
语言与自动确认开关
### 1) 查看当前设置（settings show）
### 2) 设置界面语言（settings set lang）
### 3) 设置自动确认（settings set auto_yes）
### 0) 返回上级

## 10) 日志查看
快速查看核心或 Argo 日志

## 11) 卸载管理
保留设置或完全卸载


## 12) 订阅与分享
刷新订阅、展示二维码、推送目标配置

## 13) 配置变更中心
预览/应用/回滚快照与高级变更

## 14) 内核与WARP
内核切换、WARP、BBR、证书工具

## 0) 退出
退出脚本